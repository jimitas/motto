# もっと学習コンテンツ - Motto Learning Content

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![Bootstrap](https://img.shields.io/badge/Bootstrap-5.0.2-purple.svg)](https://getbootstrap.com/)

> 小学校児童向けの日本語教育Webアプリケーション - 算数、英語、音楽、地理、美術の29個の学習モジュール

## 🌟 概要

**もっと学習コンテンツ**は、小学校の児童向けに設計された包括的な学習プラットフォームです。jimitas.comによって開発され、算数、英語、音楽、地理、美術の分野で29個の interactive な学習モジュールを提供しています。

### ✨ 主な特徴

- 📚 **29個の学習モジュール** - 幅広い教科をカバー
- 🎯 **インタラクティブ学習** - 音声、アニメーション、ゲーム要素
- 📱 **レスポンシブデザイン** - PC、タブレット、スマートフォン対応
- ♿ **アクセシビリティ対応** - スクリーンリーダー、キーボードナビゲーション
- 🚀 **高性能** - モジュラーアーキテクチャと遅延読み込み
- 🎨 **子ども向けUI** - 直感的で親しみやすいインターフェース
- 🍞 **スマート通知** - 初回訪問者向けウェルカムトースト
- 🛡️ **堅牢なエラー処理** - ユーザーフレンドリーなエラー通知

## 📋 学習モジュール

### 🔤 言語学習 (Language)
- **Classroom English** - 教室で使う基本英語
- **English words** - 基本英単語
- **カタカナのれんしゅう** - カタカナ学習
- **ローマ字のれんしゅう** - ローマ字変換練習

### 🔢 数学 (Math)
- **すうずぶろっく** - 数の概念理解
- **かぞえぼう** - 数え方学習
- **とけい** - 時計の読み方
- **九九のれんしゅう** - 掛け算九九
- **九九のひょう** - 九九表
- **たし算のひっ算** - 足し算筆算
- **ひき算のひっ算** - 引き算筆算
- **かけ算の筆算１・２** - 掛け算筆算
- **かけ算アレイ図** - 配列を使った掛け算理解
- **おかね** - お金の計算

### 🎵 音楽 (Music)
- **けんばんハーモニカ** (かんたん・上級) - 鍵盤ハーモニカ演奏
- **もっきん** - 木琴演奏
- **てっきん** - 鉄琴演奏
- **リコーダー１・２** - リコーダー演奏
- **ふしづくり4年** - メロディ作成
- **音楽記号を覚えよう** - 音楽記号学習
- **音を出そう** - 基本的な音楽理論
- **和音を出そう** - ハーモニー学習
- **メトロノーム** - リズム練習

### 🗺️ 地理 (Geography)
- **京都市の１１区** - 京都市の行政区画
- **都道府県をおぼえよう** - 日本の都道府県

### 🎨 美術 (Art)
- **せんやマスのいろぬり** - パターン塗り絵

## 🚀 技術スタック

### フロントエンド
- **HTML5** - セマンティックマークアップ
- **CSS3** - Bootstrap 5.0.2 + カスタムスタイル
- **JavaScript ES6+** - モダンJavaScript、ES Modules
- **Font Awesome** - アイコンライブラリ

### ライブラリ・依存関係
- **jQuery 3.6.0** - DOM操作
- **Howler.js** - 高品質オーディオ再生
- **Moveable** - ドラッグ&ドロップインタラクション
- **html2canvas** - スクリーンショット機能

### アーキテクチャ
- **モジュラー設計** - 各学習モジュールは独立
- **設定駆動** - 中央集権的な設定管理
- **遅延読み込み** - パフォーマンス最適化
- **エラーハンドリング** - 堅牢なエラー処理
- **通知システム** - Bootstrap 5トースト通知
- **状態管理** - localStorage使用の軽量状態管理

## 📁 プロジェクト構造

```
motto/
├── src/                        # リファクタリング済みソースコード
│   ├── config/
│   │   └── modules.js         # モジュール設定
│   ├── utils/
│   │   ├── BaseModule.js      # 基底クラス
│   │   ├── ModuleManager.js   # モジュール管理
│   │   ├── SoundManager.js    # サウンド管理
│   │   ├── ConfigValidator.js # 設定検証
│   │   ├── ToastManager.js    # トースト通知管理
│   │   └── Logger.js          # ログ・エラー処理
│   ├── styles/
│   │   └── main.css          # 統合CSS
│   └── index.js              # メインアプリケーション
├── 01cren.js ~ 29kane.js      # 学習モジュール（29個）
├── index.html                 # メインHTML（オリジナル）
├── index-refactored.html      # リファクタリング版HTML
├── style.css                  # メインスタイルシート
├── se.js                      # サウンドエフェクト
├── images/                    # 画像リソース
├── Sounds/                    # 音声ファイル
├── voice/                     # 音声ガイド
└── README.md                  # このファイル
```

## 🛠️ セットアップ・使用方法

### 1. リポジトリのクローン
```bash
git clone https://github.com/jimitas/motto.git
cd motto
```

### 2. ローカルサーバーでの実行
```bash
# Python 3の場合
python -m http.server 8000

# Node.jsのlive-serverの場合
npx live-server
```

### 3. ブラウザでアクセス
```
http://localhost:8000
```

## 🔧 開発・カスタマイズ

### 新しいモジュールの追加

1. **モジュールファイルの作成**
```javascript
// 30newmodule.js
export function newmodule() {
  // モジュールの実装
}
```

2. **設定ファイルに追加**
```javascript
// src/config/modules.js
newmodule: {
  id: 'newmodule',
  title: '新しいモジュール',
  module: () => import('../../30newmodule.js'),
  category: 'math'
}
```

3. **HTMLメニューに追加**
```html
<li id="newmodule" role="button" tabindex="0"
    aria-label="新しいモジュール - 数学学習モジュール">
  新しいモジュール
</li>
```

### デバッグ機能

ブラウザのコンソールで以下のコマンドが使用可能：

```javascript
// アプリケーション統計
mottoApp.getStats()

// 詳細ヘルスレポート
mottoApp.getHealthReport()

// トースト通知テスト
toastManager.showWelcomeToast()              // ウェルカムトースト表示
toastManager.success('成功', 'テストメッセージ')  // 成功通知
toastManager.error('エラー', 'エラーメッセージ')   // エラー通知
toastManager.clearVisitedFlag()              // 初回訪問フラグリセット

// ログレベル設定
logger.setLogLevel('debug')

// 読み込み済みサウンド確認
soundManager.getSoundIds()
```

## ♿ アクセシビリティ機能

- **キーボードナビゲーション** - Tab、Enter、Spaceキー対応
- **スクリーンリーダー対応** - ARIA属性、セマンティックHTML
- **フォーカス管理** - 視覚的フォーカスインジケーター
- **色覚多様性対応** - コントラスト比確保
- **レスポンシブデザイン** - 様々なデバイスサイズに対応
- **通知のアクセシビリティ** - `aria-live`、`role="alert"`対応
- **初回訪問者支援** - ウェルカムメッセージで使い方案内

## 🌐 ブラウザ対応

| ブラウザ | バージョン |
|---------|-----------|
| Chrome  | 85+       |
| Firefox | 85+       |
| Safari  | 14+       |
| Edge    | 85+       |

## 🍞 トースト通知システム

### 機能概要
- **初回訪問者ウェルカム** - `localStorage`で初回訪問を検出し案内表示
- **エラー通知** - モジュール読み込みエラー時に親切な通知
- **4つの通知タイプ** - 成功、警告、エラー、情報
- **自動消去** - 設定可能なタイムアウト
- **手動制御** - 閉じるボタンで任意に消去
- **アクセシブル** - ARIA属性完備、スクリーンリーダー対応

### 使用例
```javascript
// 初回訪問者向けウェルカムトースト（自動表示）
toastManager.showWelcomeToast();

// 各種通知の手動表示
toastManager.success('完了', '学習が完了しました！');
toastManager.warning('注意', '音量を確認してください');
toastManager.error('エラー', 'ファイルが見つかりません');
toastManager.info('情報', '新しい機能が追加されました');
```

## 📊 パフォーマンス最適化

- **遅延読み込み** - モジュールの動的インポート
- **リソースキャッシュ** - 効率的なメモリ管理
- **事前読み込み** - 重要モジュールの先読み
- **エラー復旧** - 堅牢なエラーハンドリング
- **軽量通知** - Bootstrap 5ネイティブトースト使用

### 🚀 2024年12月最新パフォーマンス改善

#### 音声・画像並列読み込み最適化
- **01cren.js** - 37個の音声ファイルを並列読み込み、読み込み時間大幅短縮
- **02enwo.js** - 音声200+個 + 画像110+個の並列読み込み、体感速度向上

#### UI即座表示による体感速度向上
- **07reco.js** - リコーダー指穴表示と鍵盤UIを音声読み込みと並行表示
- **22mokn.js** - 木琴鍵盤を即座に表示、音声準備完了時に有効化
- **23tekn.js** - 鉄琴鍵盤を即座に表示、音声準備完了時に有効化

#### メモリリーク防止・クリーンアップ機能
- **05kenb.js** - ページ離脱時のキーボードイベントリスナー自動削除
- **index.js** - グローバルクリーンアップシステム実装

#### 読み込み状況の可視化
- **視覚的フィードバック** - 読み込み中は半透明表示、完了時に完全有効化
- **ローディング状態表示** - 統一されたローディングインジケーター
- **エラー時対応** - 音声読み込み失敗時も UI は操作可能を維持

## 🤝 貢献方法

1. **フォーク** - リポジトリをフォーク
2. **ブランチ作成** - 機能用ブランチを作成
```bash
git checkout -b feature/new-learning-module
```
3. **変更実装** - コードの追加・修正
4. **テスト** - 動作確認
5. **プルリクエスト** - 変更内容の説明と共に送信

### 開発ガイドライン

- **コードスタイル**: ES6+、JSDoc コメント
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **パフォーマンス**: Core Web Vitals最適化
- **テスト**: 手動テスト必須

## 📝 ライセンス

このプロジェクトは [MIT License](https://opensource.org/licenses/MIT) の下で公開されています。

## 👏 クレジット

- **開発**: [jimitas.com](https://jimitas.com/)
- **UI/UX**: Bootstrap 5.0.2
- **オーディオ**: Howler.js
- **アイコン**: Font Awesome
- **インタラクション**: Moveable

## 🔗 関連リンク

- **本家サイト**: [jimitas.com](https://jimitas.com/)
- **リファクタリング詳細**: [REFACTOR_GUIDE.md](REFACTOR_GUIDE.md)
- **問題報告**: [GitHub Issues](https://github.com/jimitas/motto/issues)

## 📈 最新の更新履歴

### v2.2.0 (2024-12-28)
- ⚡ **音声並列読み込み最適化** - 01cren.js、02enwo.jsで大幅な読み込み時間短縮
- 🖼️ **画像並列読み込み機能** - 02enwo.jsで110+個の画像を並列読み込み
- 🎹 **楽器UI即座表示** - 07reco.js、22mokn.js、23tekn.jsで音声読み込み中もUI表示
- 🧹 **メモリリーク防止** - 05kenb.jsのキーボードイベントクリーンアップ機能
- 📊 **読み込み状況可視化** - 統一されたローディング表示とエラーハンドリング
- 🎯 **体感パフォーマンス向上** - 全楽器モジュールで即座のUIレスポンス実現

### v2.1.0 (2024-12-21)
- 🍞 **トースト通知システム追加** - 初回訪問者向けウェルカムメッセージ
- 🛡️ **エラー通知改善** - ユーザーフレンドリーなエラーメッセージ
- ♿ **アクセシビリティ完全統一** - 全メニュー項目にARIA属性追加
- 🧹 **UI改善** - メニュー選択を妨げるSEOコンテンツを削除
- 📱 **Bootstrap 5 JS追加** - トースト機能のための依存関係追加

## 📈 今後の予定

- [ ] TypeScript移行
- [ ] 自動テストスイート実装
- [ ] PWA対応（オフライン機能）
- [ ] 多言語対応（国際化）
- [ ] 学習進捗トラッキング
- [ ] 教師用ダッシュボード
- [ ] より詳細な通知設定
- [ ] 学習履歴の可視化

---

**もっと学習コンテンツ** で、子どもたちの学びをもっと楽しく、もっと効果的に！ 🎓✨